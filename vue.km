{"root":{"data":{"id":"c2yxj6esd7k0","created":1590320401014,"text":"Vue "},"children":[{"data":{"id":"c30cdl1suuo0","created":1590463839301,"text":"构造函数","layout":null,"expandState":"collapse"},"children":[{"data":{"id":"c30d5hxii600","created":1590466026708,"text":"initMixin","expandState":"collapse"},"children":[{"data":{"id":"c30d78cvzjs0","created":1590466162598,"text":"定义Vue.prototype._init"},"children":[]}]},{"data":{"id":"c30d5n07vvs0","created":1590466037756,"text":"stateMixin","expandState":"collapse"},"children":[{"data":{"id":"c30d8di3q6g0","created":1590466252162,"text":"定义Vue.prototype.$data"},"children":[{"data":{"id":"c30d95ud9jc0","created":1590466313853,"text":"$data和$props其实是原型上的属性"},"children":[]},{"data":{"id":"c30d9j74ht40","created":1590466342923,"text":"$data通过定义访问器属性的形式访问到_data"},"children":[]},{"data":{"id":"c30dakamtls0","created":1590466423676,"text":"$props通过定义访问器属性的形式访问到_props"},"children":[]}]},{"data":{"id":"c30d8ere6n40","created":1590466254900,"text":"定义Vue.prototype.$props","layout_right_offset":{"x":0,"y":3}},"children":[]},{"data":{"id":"c30dax8gqi80","created":1590466451843,"text":"定义Vue.prototype.$set"},"children":[]},{"data":{"id":"c30db724bq00","created":1590466473227,"text":"定义Vue.prototype.$delete"},"children":[]},{"data":{"id":"c30dfhckhco0","created":1590466809083,"text":"定义Vue.prototype.$watch"},"children":[]}]},{"data":{"id":"c30d5qttaco0","created":1590466046076,"text":"eventsMixin","expandState":"collapse"},"children":[{"data":{"id":"c30dgbrints0","created":1590466875291,"text":"定义Vue.prototype.$on"},"children":[]},{"data":{"id":"c30dgg90xps0","created":1590466885057,"text":"定义Vue.prototype.$once"},"children":[]},{"data":{"id":"c30dgnxgymg0","created":1590466901772,"text":"定义Vue.prototype.$off"},"children":[]},{"data":{"id":"c30dgwefduw0","created":1590466920212,"text":"定义Vue.prototype.$emit"},"children":[]}]},{"data":{"id":"c30d5ivnj4w0","created":1590466028773,"text":"lifecycleMixin","expandState":"collapse"},"children":[{"data":{"id":"c30dhhx5plc0","created":1590466967057,"text":"定义Vue.prototype._update"},"children":[]},{"data":{"id":"c30dhlvjlrc0","created":1590466975666,"text":"定义Vue.prototype.$forceUpdate"},"children":[]},{"data":{"id":"c30dhsmp77s0","created":1590466990369,"text":"定义Vue.prototype.$destory"},"children":[]}]},{"data":{"id":"c30d6249kww0","created":1590466070652,"text":"renderMixin","expandState":"collapse"},"children":[{"data":{"id":"c30di9fci000","created":1590467026930,"text":"定义Vue.prototype.$nextTick"},"children":[]},{"data":{"id":"c30didk1okg0","created":1590467035921,"text":"定义Vue.prototype._render"},"children":[]}]},{"data":{"id":"c30d6l5rnf40","created":1590466112102,"text":"initGlobalAPI","expandState":"collapse"},"children":[{"data":{"id":"c30djbwayog0","created":1590467110673,"text":"定义Vue.config"},"children":[]},{"data":{"id":"c30fr7sc1k00","created":1590473370859,"text":"定义Vue.util"},"children":[]},{"data":{"id":"c30frkyjmbs0","created":1590473399532,"text":"定义Vue.set"},"children":[]},{"data":{"id":"c30fro1e2340","created":1590473406235,"text":"定义Vue.delete"},"children":[]},{"data":{"id":"c30fry1acww0","created":1590473427996,"text":"定义Vue.nextTick"},"children":[]},{"data":{"id":"c30fs26rnco0","created":1590473437035,"text":"定义Vue.observable"},"children":[]},{"data":{"id":"c30fv6r9zog0","created":1590473682075,"text":"定义Vue.options","expandState":"collapse"},"children":[{"data":{"id":"c30fvhyef880","created":1590473706450,"text":"components","expandState":"collapse"},"children":[{"data":{"id":"c30g4vhtwls0","created":1590474441200,"text":"KeepAlive"},"children":[]}]},{"data":{"id":"c30fvkw05940","created":1590473712835,"text":"directives"},"children":[]},{"data":{"id":"c30fw5xb2000","created":1590473758627,"text":"filters"},"children":[]},{"data":{"id":"c30fyffbzq00","created":1590473936036,"text":"_base"},"children":[]}]},{"data":{"id":"c30gac526cg0","created":1590474869254,"text":"定义Vue.use"},"children":[]},{"data":{"id":"c30gapckks80","created":1590474898007,"text":"定义Vue.mixin"},"children":[]},{"data":{"id":"c30gaydn7fc0","created":1590474917663,"text":"定义Vue.extend"},"children":[]},{"data":{"id":"c30gbzk1src0","created":1590474998591,"text":"定义Vue.component"},"children":[]},{"data":{"id":"c30gc63tl280","created":1590475012847,"text":"定义Vue.directive"},"children":[]},{"data":{"id":"c30gcfbwkx40","created":1590475032927,"text":"定义Vue.filter"},"children":[]}]},{"data":{"id":"c30i4tdrri00","created":1590480078821,"text":"$mount"},"children":[]}]},{"data":{"id":"c30cdmb20r40","created":1590463842038,"text":"创建实例","layout":null,"layout_tianpan_offset":{"x":15,"y":-69},"expandState":"expand"},"children":[{"data":{"id":"c30gnxrf37c0","created":1590475935053,"text":"调用this._init()","expandState":"expand"},"children":[{"data":{"id":"c30godgcus80","created":1590475969213,"text":"merge options得到$options","expandState":"collapse"},"children":[{"data":{"id":"c30gpv6qxfc0","created":1590476086178,"text":"组件"},"children":[]},{"data":{"id":"c30gq189cps0","created":1590476099330,"text":"非组件（root组件）","expandState":"collapse"},"children":[{"data":{"id":"c30gr4a4y6o0","created":1590476184338,"text":"获取构造函数上的options，如果当前构造函数有父类, 获取合并父类上的options","priority":1},"children":[]},{"data":{"id":"c30grwfq7340","created":1590476245626,"text":"merge通过extends得到的options","priority":null},"children":[]},{"data":{"id":"c30h9kgp8io0","created":1590477630118,"text":"merge通过mixins得到的options"},"children":[]},{"data":{"id":"c30ha94cd3k0","created":1590477683791,"text":"不同的选项有不同的合并策略","expandState":"collapse"},"children":[{"data":{"id":"c30he94ypbs0","created":1590477997285,"text":"默认的合并策略是覆盖"},"children":[]}]}]}]},{"data":{"id":"c30hmymr04o0","created":1590478679693,"text":"    initLifecycle"},"children":[]},{"data":{"id":"c30hnahf9o80","created":1590478705492,"text":"initEvents"},"children":[]},{"data":{"id":"c30hnl966140","created":1590478728939,"text":"initRender"},"children":[]},{"data":{"id":"c30hnq1owpk0","created":1590478739370,"text":"生命周期beforeCreate","priority":null,"progress":9},"children":[]},{"data":{"id":"c30hoe7vkcw0","created":1590478791986,"text":"initInjections"},"children":[]},{"data":{"id":"c30huf1gzxk0","created":1590479263961,"text":"initState"},"children":[]},{"data":{"id":"c30hui1jpco0","created":1590479270496,"text":"initProvide"},"children":[]},{"data":{"id":"c30hulchgm80","created":1590479277688,"text":"生命周期create","progress":9},"children":[]},{"data":{"id":"c30hveprd6o0","created":1590479341617,"text":"$mount","expandState":"collapse"},"children":[{"data":{"id":"c30hx8r4jhc0","created":1590479485367,"text":"如果$options.el存在则主动调用$mount， 否则手动调用。"},"children":[]},{"data":{"id":"c30hxowurm00","created":1590479520542,"text":"$mount是在哪里定义的？","note":"在构建vue.js的入口中定义的。\nruntime和runtime-with-compiler的$mount是不一样的。\n\n在带编译器的版本里， 当options不存在render方法时，$mount内部会从el或template获取模板字符串， 并且编译成为render函数。"},"children":[]},{"data":{"id":"c30i2poq6uo0","created":1590479914048,"text":"runtime 和 runtime-with-compiler的区别？"},"children":[]},{"data":{"id":"c30i3ttr2m80","created":1590480001423,"text":"runtime-with-comiler最终调用的是runtime入口定义的$mount方法"},"children":[]},{"data":{"id":"c30i7cgoqr40","created":1590480277085,"text":"调用mountComponent","note":"在core/instance/lifecycle.js定义的"},"children":[{"data":{"id":"c30i8zllfyg0","created":1590480405812,"text":"生命周期beforeMount","progress":9},"children":[]},{"data":{"id":"c30i9by99pk0","created":1590480432699,"text":"创建renderWatcher"},"children":[{"data":{"id":"c30iibzm9bc0","created":1590481138058,"text":"vm._update(vm._render(), hydrating)"},"children":[]}]},{"data":{"id":"c30ichna5cw0","created":1590480680188,"text":"生命周期mounted","progress":9},"children":[]}]}]}]}]},{"data":{"id":"c30iepin9qo0","created":1590480854051,"text":"Watch","expandState":"collapse"},"children":[{"data":{"id":"c30ikbnjyns0","created":1590481294057,"text":"constructor","expandState":"collapse"},"children":[{"data":{"id":"c30impybu600","created":1590481481912,"text":"如果是renderWatcher，组件的_watcher属性指向renderWatcher","expandState":"expand"},"children":[]},{"data":{"id":"c30ioby3py00","created":1590481608152,"text":"组件所有的watcher对象都会保存在_watchers数组中"},"children":[]},{"data":{"id":"c30iovys70o0","created":1590481651729,"text":"属性","expandState":"expand"},"children":[{"data":{"id":"c30ipb5q1j40","created":1590481684800,"text":"deep"},"children":[{"data":{"id":"c30iwiux7eg0","created":1590482250110,"text":"是否深度监听"},"children":[]}]},{"data":{"id":"c30ipcxhr6w0","created":1590481688656,"text":"user"},"children":[{"data":{"id":"c30iws8yidc0","created":1590482270550,"text":"是否用户定义"},"children":[]}]},{"data":{"id":"c30ipepss7k0","created":1590481692544,"text":"lazy"},"children":[{"data":{"id":"c30iwy7j5wg0","created":1590482283525,"text":"是否延迟执行执行getter"},"children":[]}]},{"data":{"id":"c30ipggwdrs0","created":1590481696360,"text":"sync"},"children":[{"data":{"id":"c30ixgr666o0","created":1590482323894,"text":"当watcher update时是否同步执行getter"},"children":[]}]},{"data":{"id":"c30ipljd3qo0","created":1590481707393,"text":"before"},"children":[]}]},{"data":{"id":"c30ir5090b40","created":1590481828137,"text":"getter "},"children":[{"data":{"id":"c30isk1t7r40","created":1590481939247,"text":"在创建watcher时调用， 用于收集数据依赖"},"children":[]},{"data":{"id":"c30ivnpn4y00","created":1590482182311,"text":"如果lazy的值是true,将不会再构造函数内调用"},"children":[]}]}]},{"data":{"id":"c30iktoiag80","created":1590481333297,"text":"get","expandState":"collapse"},"children":[{"data":{"id":"c30iy9oxe6o0","created":1590482386885,"text":"pushTarget(this)"},"children":[{"data":{"id":"c30j2eprfy80","created":1590482711276,"text":"Dep.target = this, 当前wathcer会挂在全局唯一的Dep.target上"},"children":[]}]},{"data":{"id":"c30iycp5t400","created":1590482393430,"text":"value = this.getter.call(vm, vm)"},"children":[{"data":{"id":"c30j42r93i00","created":1590482841973,"text":"在执行getter的过程中， 会触发使用数据的get方法"},"children":[]}]},{"data":{"id":"c30j50ezzgw0","created":1590482915243,"text":"如果deep的值为真， 则调用traverse(value)深度监听"},"children":[{"data":{"id":"c30j5rokrxs0","created":1590482974595,"text":"遍历value触发value所有属性的get, 收集依赖"},"children":[]}]},{"data":{"id":"c30j6ki8z5c0","created":1590483037339,"text":"popTarget()"},"children":[]},{"data":{"id":"c30j6w1ui6o0","created":1590483062469,"text":"this.cleanupDeps()"},"children":[]}]},{"data":{"id":"c30il1qelgg0","created":1590481350826,"text":"addDep","expandState":"collapse"},"children":[{"data":{"id":"c30j7j72iyg0","created":1590483112851,"text":"将Dep对象加入到Watcher的依赖集合中"},"children":[]},{"data":{"id":"c30j806ius80","created":1590483149823,"text":"同时Dep对象也会把Watcher加入到订阅数组中"},"children":[]}]},{"data":{"id":"c30iledwosg0","created":1590481378369,"text":"cleanupDeps","expandState":"expand"},"children":[{"data":{"id":"c30jag7678g0","created":1590483341419,"text":"对象属性depIds和newDepIds是做什么用的？","note":"d"},"children":[]},{"data":{"id":"c30jc1zjjw80","created":1590483467211,"text":"对象属性deps和newDeps是做什么用的？","note":"deps保存上一次收集的Dep对象\n\nnewDeps保存当前get收集的Dep对象\n\n为甚么要有两个集合来保存呢？\n为了找出上一次依赖而当前又不再依赖的Dep对象， 取消对Dep对象的订阅。"},"children":[]},{"data":{"id":"c30jphzlqnc0","created":1590484520777,"text":"遍历Deps，当不在newDeps中时，取消对Dep的订阅"},"children":[]},{"data":{"id":"c30jtnn7b6w0","created":1590484846545,"text":"将newDeps赋值给deps,  清空旧的deps"},"children":[]}]},{"data":{"id":"c30ilj317mg0","created":1590481388595,"text":"update"},"children":[{"data":{"id":"c30juz13ccw0","created":1590484949694,"text":"当数据变化后会通过Dep对象来通知Watcher, 执行update"},"children":[]},{"data":{"id":"c30jvpfbnzc0","created":1590485007150,"text":"computedWatcher"},"children":[{"data":{"id":"c30jwntu7pk0","created":1590485082039,"text":"lazy == true"},"children":[]}]},{"data":{"id":"c30jwg9aawo0","created":1590485065558,"text":"useWatcher"},"children":[{"data":{"id":"c30jwu1sj2g0","created":1590485095580,"text":"sync == true"},"children":[]}]},{"data":{"id":"c30jwj5ikz40","created":1590485071861,"text":"renderWatcher"},"children":[{"data":{"id":"c30jwyt4i800","created":1590485105940,"text":"通过queueWatcher加入队列异步执行"},"children":[]}]}]},{"data":{"id":"c30im8i1ou80","created":1590481443922,"text":"run"},"children":[{"data":{"id":"c30jy6dqimg0","created":1590485200788,"text":"userWatcher执行update时会调用"},"children":[]},{"data":{"id":"c30jymxdqs00","created":1590485236804,"text":"active 可控制当前watcher是否可使用"},"children":[]},{"data":{"id":"c30jz1fg6lc0","created":1590485268372,"text":"重新执行get得到新的值， 新旧值不相等时执行callback"},"children":[]}]},{"data":{"id":"c30imcysgyo0","created":1590481453642,"text":"evaluate"},"children":[{"data":{"id":"c30jzr3h0uw0","created":1590485324244,"text":"computedWacther使用"},"children":[]},{"data":{"id":"c30jzwzwzvs0","created":1590485337090,"text":"执行get方法的到computed的值"},"children":[]},{"data":{"id":"c30k09o4xs00","created":1590485364676,"text":"dirty的值变成false, 当依赖数据变化时执行uapdate重新变成true"},"children":[]}]},{"data":{"id":"c30imgamy1k0","created":1590481460889,"text":"depend"},"children":[{"data":{"id":"c30k1ggovhk0","created":1590485457827,"text":"遍历执行deps所有的dep的depend方法， "},"children":[]},{"data":{"id":"c30k4zygn400","created":1590485735353,"text":"收集某个watcher所有的依赖"},"children":[]}]},{"data":{"id":"c30imixrz480","created":1590481466641,"text":"teardown"},"children":[{"data":{"id":"c30k3zfickg0","created":1590485655843,"text":"销毁watcher"},"children":[]}]},{"data":{"id":"c30iynuydrc0","created":1590482417726,"text":"watcher有哪几种？","expandState":"collapse"},"children":[{"data":{"id":"c30iz0liwe80","created":1590482445453,"text":"renderWatcher(render函数用于收集数据依赖)"},"children":[]},{"data":{"id":"c30iz3u3coo0","created":1590482452501,"text":"useWatcher（用户通过watch选项或者$watch定义的）"},"children":[]},{"data":{"id":"c30j023vodk0","created":1590482527103,"text":"computedWatcher（定义computed时框架内部创建的）"},"children":[]}]}]},{"data":{"id":"c30k5jvu8y80","created":1590485778730,"text":"Dep","expandState":"collapse"},"children":[{"data":{"id":"c30k5oe6p0g0","created":1590485788546,"text":"subs"},"children":[{"data":{"id":"c30mtuzimz40","created":1590493325857,"text":"用于保存订阅的wathcer对象"},"children":[]}]},{"data":{"id":"c30k5ys7cc80","created":1590485811162,"text":"addSub"},"children":[{"data":{"id":"c30mu6iye3c0","created":1590493350977,"text":"添加订阅"},"children":[]}]},{"data":{"id":"c30k5zwknk80","created":1590485813603,"text":"removeSub"},"children":[{"data":{"id":"c30mus44psg0","created":1590493397969,"text":"移除订阅"},"children":[]}]},{"data":{"id":"c30mux3s5tk0","created":1590493408832,"text":"depend"},"children":[{"data":{"id":"c30mv1ll1wg0","created":1590493418616,"text":"把当前Dep.target添加订阅，dep和watcher双向引用"},"children":[]}]},{"data":{"id":"c30k62ge5lc0","created":1590485819155,"text":"notify"},"children":[{"data":{"id":"c30n8jqcbxs0","created":1590494476820,"text":"执行所有watcher的update方法"},"children":[]}]},{"data":{"id":"c30nachu1680","created":1590494617796,"text":"Dep.target"},"children":[]}]},{"data":{"id":"c30nbj89pi00","created":1590494710819,"text":"Observer","expandState":"collapse"},"children":[{"data":{"id":"c30nhczgy5c0","created":1590495167412,"text":"constructor","expandState":"collapse"},"children":[{"data":{"id":"c30nir3abvs0","created":1590495276482,"text":"当前监听的对象的__ob__指向observer对象"},"children":[]}]},{"data":{"id":"c30nipi5nt40","created":1590495273027,"text":"监听普通对象","expandState":"collapse"},"children":[{"data":{"id":"c30nlta1i3k0","created":1590495516336,"text":"对象的每一个属性都使用defineReactive转化成访问器属性"},"children":[]},{"data":{"id":"c30nmimahu80","created":1590495571496,"text":"在defineReactive闭包内有一个Dep对象"},"children":[]},{"data":{"id":"c30nojs7vug0","created":1590495730760,"text":"执行get方法： 当在watcher执行getter的时候， wathcer对象挂在Dep.target上， 使用访问器属性时， 就可以把watchers收集"},"children":[]},{"data":{"id":"c30nq29jvso0","created":1590495849354,"text":"执行set方法：执行dep.notify() "},"children":[]}]},{"data":{"id":"c30niforw6g0","created":1590495251659,"text":"监听数组","expandState":"collapse"},"children":[{"data":{"id":"c30pbvq4adk0","created":1590500380240,"text":"监听数组元素本身的变化"},"children":[{"data":{"id":"c30pktphovs0","created":1590501081126,"text":"遍历数组的observe每一项"},"children":[]}]},{"data":{"id":"c30pfpcox2w0","created":1590500679824,"text":"监听用户对数组的操作","expandState":"collapse"},"children":[{"data":{"id":"c30pg1opobc0","created":1590500706672,"text":"pop, push, shift, unshift,splice,sort,reverse","expandState":"collapse"},"children":[{"data":{"id":"c30pnw58y6g0","created":1590501321525,"text":"修改数组原型"},"children":[]}]},{"data":{"id":"c30pnxliq1c0","created":1590501324685,"text":"通过下标改变数组某一项"},"children":[]}]}]}]}]},"template":"right","theme":"fresh-green","version":"1.4.43"}